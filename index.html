<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusDaily - IIM Bodh Gaya</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel for JSX (Pinned Version for Stability) -->
    <script src="https://unpkg.com/@babel/standalone@7.24.5/babel.min.js"></script>

    <!-- Import Map for React and Libraries -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.300.0"
        }
    }
    </script>

    <style>
        /* Custom scrollbar for better aesthetics on mobile */
        ::-webkit-scrollbar {
            width: 4px;
            height: 4px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom, 20px);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <!-- 
      FIX: Removed "env" from data-presets. 
      The "env" preset often transpiles ES modules (import/export) to CommonJS (require),
      which browsers don't understand natively. By using only "react", we let the 
      browser handle the imports via the importmap.
    -->
    <script type="text/babel" data-type="module" data-presets="react">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            BookOpen, 
            Utensils, 
            Shirt, 
            AlertCircle, 
            Menu, 
            Bell, 
            MapPin, 
            Calendar, 
            Plus, 
            Camera, 
            Clock, 
            Home,
            MessageSquare,
            Search,
            ChevronRight,
            ChevronLeft,
            ChevronDown, 
            ChevronUp,   
            User,
            MoreHorizontal,
            School,
            LogIn,
            CheckCircle2,
            Lock,
            ShoppingBag,
            Tag,
            ArrowLeft,
            ArrowRight, 
            Phone,
            FileText,
            ArrowDownCircle,
            ArrowUpCircle,
            Info,
            X,
            Printer,
            Coffee,
            Shield,
            Contact,
            Users,
            Compass,
            GraduationCap,
            Gift 
        } from 'lucide-react';

        // --- MOCK DATA ---

        const STUDENT_PROFILE = {
            name: "Aryan Gupta",
            id: "IPM04-042",
            branch: "IPM Batch 04",
            section: "Section A",
            year: "2nd Year",
            hostel: "Hostel-8 (Bose Hostel)",
            room: "204",
            profile_pic: null 
        };

        const WEEKLY_SCHEDULE = {
            "2026-02-02": [
                { id: 101, time: "08:45 AM", subject: "Business Ethics and Values", code: "BEV", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Payal Dey" },
                { id: 102, time: "10:00 AM", subject: "Database Management System", code: "DBMS", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Supriya Kumar Ghatak" },
                { id: 103, time: "11:15 AM", subject: "Operations Research", code: "OR", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Rohit Agrawal" },
                { id: 104, time: "01:15 PM", subject: "Intro to Human Resource Mgmt", code: "HRM", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Remya Lathabhavan" },
                { id: 105, time: "02:30 PM", subject: "Creativity and Innovation", code: "C&I", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Vishal Ashok Wankhede" }
            ],
            "2026-02-03": [
                { id: 201, time: "08:45 AM", subject: "Business Research Method", code: "BRM", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Ahmed Ashhar" },
                { id: 202, time: "10:00 AM", subject: "Environmental Science II", code: "EVS", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Muhammed Ashiq V" },
                { id: 203, time: "11:15 AM", subject: "Foreign Language – II", code: "FL-2", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Durba Banerjee" },
                { id: 204, time: "01:15 PM", subject: "Public Policy", code: "PP", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Suresh KG" },
                { id: 205, time: "02:30 PM", subject: "Critical Thinking & Writing", code: "CTWS", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Sajan Pookkodan" },
                { id: 206, time: "03:45 PM", subject: "Game Theory", code: "GT", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Sharadendu Sharma" }
            ],
            "2026-02-04": [
                { id: 1, time: "08:45 AM", subject: "Database Mgmt System", code: "DBMS", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Supriya Kumar Ghatak" },
                { id: 2, time: "10:00 AM", subject: "Business Ethics & Values", code: "BEV", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Payal Dey" },
                { id: 3, time: "11:15 AM", subject: "Operations Research", code: "OR", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Rohit Agrawal" },
                { id: 4, time: "01:15 PM", subject: "Intro to HR Mgmt", code: "HRM", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Remya Lathabhavan" },
                { id: 5, time: "02:30 PM", subject: "Creativity and Innovation", code: "C&I", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Vishal Ashok Wankhede" },
            ],
            "2026-02-05": [
                { id: 401, time: "08:45 AM", subject: "Business Research Method", code: "BRM", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Ahmed Ashhar" },
                { id: 402, time: "10:00 AM", subject: "Environmental Science II", code: "EVS", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Muhammed Ashiq V" },
                { id: 403, time: "01:15 PM", subject: "Public Policy", code: "PP", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Suresh KG" },
                { id: 404, time: "02:30 PM", subject: "Critical Thinking & Writing", code: "CTWS", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Sajan Pookkodan" },
                { id: 405, time: "03:45 PM", subject: "Game Theory", code: "GT", room: "Ramanuja Classroom", type: "Lecture", faculty: "Prof. Sharadendu Sharma" }
            ]
        };

        const ACADEMIC_UPDATES = [
            { id: 1, title: "HRM Quiz", date: "9th Feb", time: "02:30 PM", desc: "Syllabus: Module 1 & 2. Venue: Exam Hall.", type: "Quiz", color: "bg-red-50 text-red-700" },
            { id: 2, title: "EVS-II Assignment", date: "8th Feb", time: "11:59 PM", desc: "Deadline extended. Submit softcopy on LMS.", type: "Deadline", color: "bg-orange-50 text-orange-700" },
            { id: 3, title: "Guest Lecture", date: "10th Feb", time: "10:00 AM", desc: "Topic: AI in Management. Attendance Compulsory.", type: "Lecture", color: "bg-blue-50 text-blue-700" }
        ];

        // Added Menus for Outlets
        const OUTLET_MENUS = {
            "Nescafe": ["Cold Coffee (₹40)", "Hot Coffee (₹20)", "Maggi (₹30)", "Grilled Sandwich (₹50)", "Iced Tea (₹35)"],
            "Can3": ["Chicken Biryani (₹120)", "Veg Fried Rice (₹80)", "Egg Roll (₹40)", "Chilli Chicken (₹100)", "Paneer Roll (₹50)"],
            "Sippin": ["Watermelon Juice (₹40)", "Oreo Shake (₹60)", "Mint Mojito (₹50)", "Cold Coffee (₹45)", "Fruit Salad (₹50)"],
            "Niranjana Canteen": ["Veg Thali (₹60)", "Samosa (₹10)", "Masala Dosa (₹50)", "Tea (₹10)", "Aloo Paratha (₹30)"]
        };

        const MESS_TIMINGS = {
            breakfast: "07:30-10:00",
            lunch: "12:00-14:15",
            snacks: "17:00-18:30",
            dinner: "19:45-22:00"
        };

        const WEEKLY_MESS_MENU = {
            "Monday": {
                "breakfast": ["Tari Poha", "Sev", "Boiled Egg", "Bread", "Peanut Butter", "Jam", "Cornflakes", "Fruits", "Tea/Coffee"],
                "lunch": ["Rice", "Chole Bhature", "Aloo Masala", "Boondi Raita", "Salad", "Pickle"],
                "snacks": ["Fried Idli", "Peanut Chutney", "Tea/Coffee"],
                "dinner": ["Jeera Rice", "Butter Roti", "Chana Dal", "Paneer Malai Kofta", "Fruit Custard", "Chicken Hyderabadi"]
            },
            "Tuesday": {
                "breakfast": ["Puri", "Aloo Sabzi", "Bread", "Butter", "Jam", "Sprouts", "Fruit", "Tea/Coffee"],
                "lunch": ["Rice", "Roti", "Toor Dal", "Chana Masala", "Aloo Methi", "Fryums", "Sweet Lassi"],
                "snacks": ["Aloo Tikki Chaat", "Chole", "Chutneys", "Tea/Coffee"],
                "dinner": ["Rice", "Roti", "Palak Dal", "Soyabean Masala", "Gajar Matar Sabji", "Jalebi"]
            },
            "Wednesday": {
                "breakfast": ["Idli", "Vada", "Sambar", "Boiled Egg", "Bread", "Butter", "Chocos", "Fruit", "Tea/Coffee"],
                "lunch": ["Rice", "Roti", "Sambar", "Rajma", "Aloo Palak", "Beetroot Raita", "Fryums"],
                "snacks": ["Bread Pakoda", "Green/Imli Chutney", "Tea/Coffee"],
                "dinner": ["Fried Rice", "Roti", "Dal Makhani", "Paneer Masala", "Gulab Jamun", "Chilli Chicken"]
            },
            "Thursday": {
                "breakfast": ["Sattu Paratha", "Aloo Matar Sabzi", "Boiled Egg", "Bread", "Cornflakes", "Fruits", "Tea/Coffee"],
                "lunch": ["Rice", "Roti", "Yellow Dal", "Mushroom Matar", "Salad"],
                "snacks": ["Egg Curry (2 Eggs)", "Tea/Coffee"],
                "dinner": ["Rice", "Poori", "Dal Tadka", "Aloo Gobhi Matar", "Mix Veg", "Suji Halwa"]
            },
            "Friday": {
                "breakfast": ["Upma", "Chutney", "Omelette", "Bread", "Peanut Butter", "Chocos", "Fruit", "Tea/Coffee"],
                "lunch": ["Rice", "Roti", "Rasam", "Kadhi Pakoda", "Aloo Bhujia", "Papad", "Salad"],
                "snacks": ["Samosa", "Matar Sabzi", "Red Chutney", "Tea/Coffee"],
                "dinner": ["Roti", "Rice", "Palak Paneer", "Masoor Dal", "Gajar Halwa", "Chicken Kadai"]
            },
            "Saturday": {
                "breakfast": ["Aloo Paratha", "Curd", "Boiled Egg", "Bread", "Cornflakes", "Sprouts", "Fruits", "Tea/Coffee"],
                "lunch": ["Rice", "Roti", "Chana Dal", "Veg Kolhapuri", "Chole Masala", "Fryums", "Buttermilk"],
                "snacks": ["Pani Puri", "Imli Chutney", "Tea/Coffee"],
                "dinner": ["Rice", "Roti", "Kashmiri Aloo Dum", "Toor Dal", "Rasmalai", "Egg Curry"]
            },
            "Sunday": {
                "breakfast": ["Masala Dosa", "Sambar", "Peanut Chutney", "Boiled Egg", "Bread", "Chocos", "Fruit", "Tea/Coffee"],
                "lunch": ["Roti", "Veg Biryani", "Paneer Butter Masala", "Koshimbir", "Salad"],
                "snacks": ["Chicken Biryani", "Salan"],
                "dinner": ["Chura Matar", "Matar Pulao", "Butter Roti", "Yellow Dal", "Cabbage Matar", "Sewaiyan"]
            }
        };

        const LAUNDRY_DATA = {
            hostel: "Bose Hostel (H8)",
            location: "Patel Block-1",
            collection: {
                dates: ["2026-02-05", "2026-02-11", "2026-02-16", "2026-02-21", "2026-02-27"],
                time: "07:00 PM - 09:30 PM"
            },
            distribution: {
                dates: ["2026-02-11", "2026-02-16", "2026-02-21", "2026-02-27"],
                time: "05:30 PM - 08:30 PM"
            }
        };

        const DIRECTORY_DATA = {
            emergency: [
                { name: "Ambulance Emergency", number: "+91-9999999999", icon: AlertCircle, color: "text-red-600 bg-red-100" },
                { name: "Campus Security (Main Gate)", number: "+91-8888888888", icon: Shield, color: "text-blue-600 bg-blue-100" },
                { name: "Medical Officer", number: "+91-7777777777", icon: Plus, color: "text-green-600 bg-green-100" },
                { name: "Warden (Bose Hostel)", number: "+91-6666666666", icon: User, color: "text-purple-600 bg-purple-100" },
                { name: "Hostel Guard", number: "+91-9876543210", icon: Shield, color: "text-orange-600 bg-orange-100" },
                { name: "Police Station", number: "100", icon: AlertCircle, color: "text-slate-600 bg-slate-200" }
            ],
            local: [
                { name: "Nescafe", number: "+91-0000000001", icon: Coffee, desc: "Food Court", canOrder: true },
                { name: "Can3", number: "+91-0000000002", icon: Utensils, desc: "Food Court", canOrder: true },
                { name: "Sippin", number: "+91-0000000003", icon: Coffee, desc: "Food Court", canOrder: true },
                { name: "Niranjana Canteen", number: "+91-0000000004", icon: Utensils, desc: "Food Court", canOrder: true },
                { name: "Arvind Bhaiya (General Store)", number: "+91-0000000005", icon: ShoppingBag, desc: "Near Veg Mess", canOrder: false },
                { name: "Printer Bhaiya", number: "+91-0000000006", icon: Printer, desc: "Acad Block", canOrder: false }
            ],
            pocs: [
                { name: "International Relations", type: "Committee", contacts: [{ name: "Rohan Mehta (MBA)", number: "+91-9876500001" }, { name: "Ananya Singh (IPM)", number: "+91-9876500002" }] },
                { name: "Samatvam", type: "Committee", contacts: [{ name: "Vikram Das (MBA)", number: "+91-9876500003" }, { name: "Ishita Patel (IPM)", number: "+91-9876500004" }] },
                { name: "Admissions Committee", type: "Committee", contacts: [{ name: "Suresh Reddy (MBA)", number: "+91-9876500005" }, { name: "Neha Gupta (IPM)", number: "+91-9876500006" }] },
                { name: "Media & PR Committee", type: "Committee", contacts: [{ name: "Aditya Verma (MBA)", number: "+91-9876500007" }, { name: "Riya Sharma (IPM)", number: "+91-9876500008" }] },
                { name: "Alumni Relations", type: "Committee", contacts: [{ name: "Karan Johar (MBA)", number: "+91-9876500009" }, { name: "Simran Kaur (IPM)", number: "+91-9876500010" }] },
                { name: "Hostel & Mess Comm", type: "Committee", contacts: [{ name: "Rahul Roy (MBA)", number: "+91-9876500011" }, { name: "Priya Malik (IPM)", number: "+91-9876500012" }] },
                { name: "Cultural Committee", type: "Committee", contacts: [{ name: "Arjun Rampal (MBA)", number: "+91-9876500013" }, { name: "Sana Khan (IPM)", number: "+91-9876500014" }] },
                { name: "Envision Cell", type: "Committee", contacts: [{ name: "Kabir Singh (MBA)", number: "+91-9876500015" }, { name: "Preeti Sikka (IPM)", number: "+91-9876500016" }] },
                { name: "IT Committee", type: "Committee", contacts: [{ name: "Dev Patel (MBA)", number: "+91-9876500017" }, { name: "Zara Ali (IPM)", number: "+91-9876500018" }] },
                { name: "Pragati", type: "Committee", contacts: [{ name: "Yash Chopra (MBA)", number: "+91-9876500019" }, { name: "Tara Sutaria (IPM)", number: "+91-9876500020" }] },
                { name: "Sports Committee", type: "Committee", contacts: [{ name: "Milkha Singh (MBA)", number: "+91-9876500021" }, { name: "Saina Nehwal (IPM)", number: "+91-9876500022" }] },
                { name: "IPM Outreach", type: "Committee", isIPMOnly: true, contacts: [{ name: "Vivaan Shah (IPM)", number: "+91-9876500023" }, { name: "Diya Mirza (IPM)", number: "+91-9876500024" }] },
                { name: "Communication Club", type: "Club", contacts: [{ name: "Farhan Akhtar (MBA)", number: "+91-9876500025" }, { name: "Zoya Akhtar (IPM)", number: "+91-9876500026" }] },
                { name: "The Quiz Masters", type: "Club", contacts: [{ name: "Siddharth Basu (MBA)", number: "+91-9876500027" }, { name: "Bourne O'Brien (IPM)", number: "+91-9876500028" }] },
                { name: "Transcendence Cap", type: "Club", contacts: [{ name: "Harshad Mehta (MBA)", number: "+91-9876500029" }, { name: "Ketana Parekh (IPM)", number: "+91-9876500030" }] },
                { name: "Dimensions", type: "Club", contacts: [{ name: "Christopher Nolan (MBA)", number: "+91-9876500031" }, { name: "Greta Gerwig (IPM)", number: "+91-9876500032" }] },
                { name: "MaSq", type: "Club", contacts: [{ name: "Prabhu Deva (MBA)", number: "+91-9876500033" }, { name: "Remo D'Souza (IPM)", number: "+91-9876500034" }] },
                { name: "Unstop Igniters", type: "Club", contacts: [{ name: "Elon Musk (MBA)", number: "+91-9876500035" }, { name: "Jeff Bezos (IPM)", number: "+91-9876500036" }] },
                { name: "Arthashastra", type: "Club", contacts: [{ name: "Amartya Sen (MBA)", number: "+91-9876500037" }, { name: "Raghuram Rajan (IPM)", number: "+91-9876500038" }] },
                { name: "Srijan", type: "Club", contacts: [{ name: "MF Husain (MBA)", number: "+91-9876500039" }, { name: "Raja Ravi Varma (IPM)", number: "+91-9876500040" }] },
                { name: "FiNix", type: "Club", contacts: [{ name: "Warren Buffett (MBA)", number: "+91-9876500041" }, { name: "Charlie Munger (IPM)", number: "+91-9876500042" }] },
                { name: "Eclectica", type: "Club", contacts: [{ name: "Shashi Tharoor (MBA)", number: "+91-9876500043" }, { name: "Chetan Bhagat (IPM)", number: "+91-9876500044" }] },
                { name: "Prodify", type: "Club", contacts: [{ name: "Steve Jobs (MBA)", number: "+91-9876500045" }, { name: "Tim Cook (IPM)", number: "+91-9876500046" }] },
                { name: "HRise", type: "Club", contacts: [{ name: "Indra Nooyi (MBA)", number: "+91-9876500047" }, { name: "Satya Nadella (IPM)", number: "+91-9876500048" }] },
                { name: "Public Policy Club", type: "Club", contacts: [{ name: "Narendra Modi (MBA)", number: "+91-9876500049" }, { name: "Amit Shah (IPM)", number: "+91-9876500050" }] },
                { name: "Unnayan", type: "Club", contacts: [{ name: "Ratan Tata (MBA)", number: "+91-9876500051" }, { name: "Azim Premji (IPM)", number: "+91-9876500052" }] },
                { name: "EBSB", type: "Club", contacts: [{ name: "Sardar Patel (MBA)", number: "+91-9876500053" }, { name: "Subhash Bose (IPM)", number: "+91-9876500054" }] },
                { name: "StraCon", type: "Club", contacts: [{ name: "Michael Porter (MBA)", number: "+91-9876500055" }, { name: "Philip Kotler (IPM)", number: "+91-9876500056" }] },
                { name: "Publication Cell", type: "Club", contacts: [{ name: "Ruskin Bond (MBA)", number: "+91-9876500057" }, { name: "Arundhati Roy (IPM)", number: "+91-9876500058" }] },
                { name: "MathSoc", type: "Club", isIPMOnly: true, contacts: [{ name: "Srinivasa Ramanujan (IPM)", number: "+91-9876500059" }, { name: "Aryabhata (IPM)", number: "+91-9876500060" }] },
                { name: "DebSoc", type: "Club", isIPMOnly: true, contacts: [{ name: "Arnab Goswami (IPM)", number: "+91-9876500061" }, { name: "Barkha Dutt (IPM)", number: "+91-9876500062" }] },
            ]
        };

        const MAP_DATA = {
            campus: [
                { id: 1, name: "Academic Building - Uruvela", type: "Academic" },
                { id: 2, name: "Auditorium - Niranjana", type: "Events" },
                { id: 3, name: "MDP Block", type: "Academic" },
                { id: 4, name: "Sports Complex - Udaan", type: "Sports" },
                { id: 5, name: "Patel (New Hostel 1)", type: "Residential" },
                { id: 6, name: "Tilak (New Hostel 2)", type: "Residential" },
                { id: 7, name: "Azad (New Hostel 3)", type: "Residential" },
                { id: 9, name: "Ashoka (H2)", type: "Residential" },
                { id: 10, name: "Aryabhatta (H3)", type: "Residential" },
                { id: 11, name: "Bhaskara (H3)", type: "Residential" },
                { id: 12, name: "Gargi (H6)", type: "Residential" },
                { id: 13, name: "Sang (H7)", type: "Residential" },
                { id: 14, name: "Annapurna Mess", type: "Mess" },
                { id: 15, name: "Dhanvanthari Medical Block", type: "Medical" },
                { id: 16, name: "Faculty Apartments", type: "Residential" },
                { id: 17, name: "Director's Residence", type: "Residential" },
            ],
            uruvela: [
                { id: 101, name: "Ramanuja Classroom", type: "Ground Floor" },
                { id: 102, name: "Computer Centre", type: "1st Floor" },
                { id: 103, name: "Library", type: "Ground Floor" },
                { id: 104, name: "Faculty Wing", type: "2nd Floor" },
                { id: 105, name: "Conference Room", type: "1st Floor" }
            ]
        };

        const EVENTS = [
            { id: 1, title: "YES Event", club: "Envision Cell", date: "6 Feb", time: "10:00 AM", loc: "Auditorium", color: "bg-yellow-50 text-yellow-700" },
            { id: 2, title: "TedEx Event", club: "Envision Cell", date: "7 Feb", time: "5:00 PM", loc: "Auditorium", color: "bg-red-50 text-red-700" },
        ];

        const INITIAL_MARKETPLACE_ITEMS = [
            { id: 1, title: "Casio Scientific Calculator", price: "₹400", seller: "Rohan (MBA-1)", condition: "Good", type: "sell", imageUrl: "https://images.unsplash.com/photo-1587145820266-a795fe660282?auto=format&fit=crop&q=80&w=300" },
            { id: 2, title: "Study Table Lamp", price: "₹250", seller: "Priya (IPM-3)", condition: "Like New", type: "sell", imageUrl: "https://images.unsplash.com/photo-1507473885765-e6ed057f782c?auto=format&fit=crop&q=80&w=300" },
            { id: 3, title: "Kettle (1.5L)", price: "₹600", seller: "Amit (MBA-2)", condition: "Used", type: "sell", imageUrl: "https://images.unsplash.com/photo-1520038410233-7141dd7828cc?auto=format&fit=crop&q=80&w=300" },
            { id: 4, title: "CAT Preparation Books", price: "Free", seller: "Ankit (IPM-5)", condition: "Used", type: "donate", imageUrl: "https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&q=80&w=300" },
        ];

        const INITIAL_LOST_FOUND = [
            { id: 1, type: "Found", item: "Blue Umbrella", location: "Library Reading Room", date: "Yesterday", contact: "Security Main Gate", imageUrl: "https://images.unsplash.com/photo-1557683316-973673baf926?auto=format&fit=crop&q=80&w=300" },
            { id: 2, type: "Lost", item: "Boat Airdopes Case", location: "Near Mess", date: "Today", contact: "Please return to H8-204", imageUrl: "https://images.unsplash.com/photo-1572569028738-411a196309c5?auto=format&fit=crop&q=80&w=300" },
        ];

        const NOTICES = [
            { id: 0, title: "No Rice in Lunch Tomorrow", date: "Just Now", type: "Mess", urgent: true },
            { id: 1, title: "End Term Exam Schedule", date: "2 hrs ago", type: "Academic", urgent: true },
            { id: 2, title: "Library Closed for Maintenance", date: "Yesterday", type: "Admin", urgent: false },
            { id: 3, title: "Inter-Hostel Cricket Registration", date: "2 days ago", type: "Sports", urgent: false },
        ];

        const INITIAL_COMPLAINTS = [
            { 
                id: "TKT-IPM-992", 
                category: "Wi-Fi", 
                desc: "Weak signal in Room 204 corner", 
                date: "2 Oct", 
                status: "Resolved", 
                color: "bg-green-100 text-green-700" 
            },
            { 
                id: "TKT-IPM-998", 
                category: "Cleaning", 
                desc: "Dustbin overflow in corridor", 
                date: "Today", 
                status: "Assigned", 
                color: "bg-orange-100 text-orange-700",
                assigned_to: "Housekeeping Staff"
            }
        ];

        // --- COMPONENTS ---

        const Card = ({ children, className = "", onClick }) => (
            <div onClick={onClick} className={`bg-white rounded-xl shadow-sm border border-slate-100 p-4 ${className}`}>
                {children}
            </div>
        );

        const Badge = ({ children, color = "bg-blue-100 text-blue-700" }) => (
            <span className={`text-xs font-semibold px-2 py-1 rounded-full ${color}`}>
                {children}
            </span>
        );

        const SectionHeader = ({ title, onBack }) => (
            <div className="flex items-center gap-3 mb-4">
                <button onClick={onBack} className="p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500">
                    <ArrowLeft size={20} />
                </button>
                <h2 className="text-xl font-bold text-slate-900">{title}</h2>
            </div>
        );

        function App() {
            // Login State
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [emailInput, setEmailInput] = useState('');
            const [passwordInput, setPasswordInput] = useState('');
            const [isLoginLoading, setIsLoginLoading] = useState(false);

            // Dashboard State
            const [activeTab, setActiveTab] = useState('home'); 
            const [complaints, setComplaints] = useState(INITIAL_COMPLAINTS);
            const [marketplaceItems, setMarketplaceItems] = useState(INITIAL_MARKETPLACE_ITEMS);
            const [lostFoundItems, setLostFoundItems] = useState(INITIAL_LOST_FOUND);
            
            // Directory State
            const [dirCategory, setDirCategory] = useState('emergency'); // Default to Emergency
            const [activePocSection, setActivePocSection] = useState(null); // 'Committee' | 'Club'

            // Map State
            const [mapView, setMapView] = useState('campus'); // 'campus' | 'uruvela'

            // Marketplace State
            const [marketFilter, setMarketFilter] = useState('all'); // all, sell, donate
            const [listingType, setListingType] = useState('sell'); // sell, donate

            // Ordering State
            const [selectedOutlet, setSelectedOutlet] = useState(null);

            // Modal State
            const [activeModal, setActiveModal] = useState(null); // 'actionMenu', 'complaint', 'lostfound', 'sell', 'order', null
            
            // Navigation State (Shared for Schedule & Mess)
            const [selectedDate, setSelectedDate] = useState("2026-02-04"); // Default to Wednesday
            
            // Simulation State
            const [simulatedHour, setSimulatedHour] = useState(10); 

            // Helper to format date for display
            const formatDateDisplay = (dateStr) => {
                const date = new Date(dateStr);
                return date.toLocaleDateString('en-US', { weekday: 'long', day: 'numeric', month: 'short' });
            };
            
            // Helper to get Day Name for Mess Menu lookup (e.g. "Monday")
            const getDayName = (dateStr) => {
                const date = new Date(dateStr);
                return date.toLocaleDateString('en-US', { weekday: 'long' });
            };

            // Helper to determine Laundry Status based on DATE
            const getLaundryStatus = (dateStr) => {
                if (LAUNDRY_DATA.collection.dates.includes(dateStr)) {
                return { status: "Collection Today", sub: "Drop at Patel Block-1", time: LAUNDRY_DATA.collection.time, urgent: true };
                }
                if (LAUNDRY_DATA.distribution.dates.includes(dateStr)) {
                return { status: "Distribution Today", sub: "Pickup at Patel Block-1", time: LAUNDRY_DATA.distribution.time, urgent: true };
                }

                // Determine upcoming
                const nextCollection = LAUNDRY_DATA.collection.dates.find(d => d > dateStr);
                // Find next collection that is really tomorrow
                const tomorrow = new Date(dateStr);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const tomorrowStr = tomorrow.toISOString().split('T')[0];

                if (nextCollection === tomorrowStr) {
                    return { status: "Collection Tomorrow", sub: "Prepare your bag", time: LAUNDRY_DATA.collection.time, urgent: true }; // Marked Urgent for Home Card
                }

                if (nextCollection) {
                    // Format simple date
                    const d = new Date(nextCollection);
                    return { status: `Next: ${d.getDate()} Feb`, sub: "Collection", time: LAUNDRY_DATA.collection.time, urgent: false };
                }

                return { status: "No Upcoming", sub: "Check Notice", time: "", urgent: false };
            };

            const laundryInfo = getLaundryStatus(selectedDate); // Dynamic based on simulated date

            const getTimeContext = () => {
                // For Home Tab, we use the simulated date (Wednesday) to determine the menu
                const simulatedDayName = getDayName(selectedDate); 
                const dailyMenu = WEEKLY_MESS_MENU[simulatedDayName] || WEEKLY_MESS_MENU["Monday"]; // Fallback

                if (simulatedHour < 11) return { phase: 'Morning', meal: dailyMenu.breakfast, time: MESS_TIMINGS.breakfast, mealKey: 'Breakfast' };
                if (simulatedHour < 16) return { phase: 'Afternoon', meal: dailyMenu.lunch, time: MESS_TIMINGS.lunch, mealKey: 'Lunch' };
                if (simulatedHour < 19) return { phase: 'Evening', meal: dailyMenu.snacks, time: MESS_TIMINGS.snacks, mealKey: 'Snacks' };
                return { phase: 'Night', meal: dailyMenu.dinner, time: MESS_TIMINGS.dinner, mealKey: 'Dinner' };
            };

            const context = getTimeContext();

            // Helper to navigate days
            const handleDateChange = (direction) => {
                const date = new Date(selectedDate);
                date.setDate(date.getDate() + direction);
                const newDateStr = date.toISOString().split('T')[0];
                setSelectedDate(newDateStr);
            };

            const handleLogin = (e) => {
                e.preventDefault();
                if (!emailInput || !passwordInput) return;
                setIsLoginLoading(true);
                setTimeout(() => {
                setIsLoggedIn(true);
                setIsLoginLoading(false);
                }, 1500);
            };

            const handleLodgeComplaint = (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const newTicket = {
                id: `TKT-${Math.floor(Math.random() * 1000)}`,
                category: formData.get('category'),
                desc: formData.get('description'),
                date: "Just Now",
                status: "Open",
                color: "bg-red-100 text-red-700"
                };
                setComplaints([newTicket, ...complaints]);
                setActiveModal(null);
                setActiveTab('directory'); // Redirect to directory where complaints are shown
            };

            const handleSellItem = (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const newItem = {
                id: Date.now(),
                title: formData.get('title'),
                price: listingType === 'donate' ? 'Free' : `₹${formData.get('price')}`,
                seller: `${STUDENT_PROFILE.name} (${STUDENT_PROFILE.year})`,
                condition: "Used",
                type: listingType,
                image: "camera" 
                };
                setMarketplaceItems([newItem, ...marketplaceItems]);
                setActiveModal(null);
                setActiveTab('market');
            };

            const handlePostLostFound = (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const newItem = {
                id: Date.now(),
                type: formData.get('type'),
                item: formData.get('item'),
                location: formData.get('location'),
                date: "Just Now",
                contact: `Return to ${STUDENT_PROFILE.room}`
                };
                setLostFoundItems([newItem, ...lostFoundItems]);
                setActiveModal(null);
                setActiveTab('lostfound');
            };

            const handleOrderSubmit = (e) => {
                e.preventDefault();
                // Simulate payment process
                const btn = e.target.querySelector('button[type="submit"]');
                const originalText = btn.innerText;
                btn.innerText = "Processing Payment...";
                btn.disabled = true;
                
                setTimeout(() => {
                    alert(`Order Placed Successfully at ${selectedOutlet}!`);
                    setActiveModal(null);
                    setSelectedOutlet(null);
                }, 1500);
            };

            // --- LOGIN SCREEN ---
            if (!isLoggedIn) {
                return (
                <div className="min-h-screen bg-slate-50 flex flex-col justify-center items-center p-6 relative overflow-hidden font-sans">
                    <div className="absolute top-0 left-0 w-full h-72 bg-gradient-to-b from-[#800000] to-[#a52a2a] rounded-b-[3rem] z-0 shadow-2xl"></div>
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm relative z-10 border border-slate-100 animate-in slide-in-from-bottom-8 duration-700">
                    <div className="flex flex-col items-center mb-8">
                        <div className="w-20 h-20 bg-red-50 rounded-full flex items-center justify-center text-[#800000] mb-4 ring-4 ring-white shadow-lg">
                        <School size={40} />
                        </div>
                        <h1 className="text-xl font-bold text-slate-800 tracking-tight text-center">CampusDaily</h1>
                        <p className="text-[#800000] font-semibold text-sm">IIM Bodh Gaya</p>
                    </div>
                    <form onSubmit={handleLogin} className="space-y-4">
                        <div>
                        <label className="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wider">College ID / Email</label>
                        <input type="text" required placeholder="student.id@iimbg.ac.in" value={emailInput} onChange={(e) => setEmailInput(e.target.value)} className="w-full mt-1 p-3 pl-4 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 outline-none focus:ring-2 focus:ring-[#800000] focus:bg-white transition-all shadow-sm" />
                        </div>
                        <div>
                        <label className="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wider">Password</label>
                        <div className="relative mt-1">
                            <input type="password" required placeholder="••••••••" value={passwordInput} onChange={(e) => setPasswordInput(e.target.value)} className="w-full p-3 pl-10 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 outline-none focus:ring-2 focus:ring-[#800000] focus:bg-white transition-all shadow-sm" />
                            <Lock size={16} className="absolute left-3 top-3.5 text-slate-400" />
                        </div>
                        </div>
                        <button type="submit" disabled={isLoginLoading} className="w-full bg-[#800000] hover:bg-[#600000] text-white font-bold py-3.5 rounded-xl shadow-lg shadow-red-200 active:scale-95 transition-all disabled:opacity-70 disabled:active:scale-100 flex items-center justify-center gap-2 mt-2">
                        {isLoginLoading ? (
                            <span className="flex items-center gap-2">Authenticating <span className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></span></span>
                        ) : (
                            <React.Fragment><span>Sign In</span><LogIn size={18} /></React.Fragment>
                        )}
                        </button>
                    </form>
                    </div>
                    <div className="absolute bottom-6 text-center z-10"><p className="text-xs text-slate-400 font-medium">Powered by CampusDaily</p></div>
                </div>
                );
            }

            // --- DASHBOARD SCREEN ---
            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-20">
                
                {/* TIME SIMULATOR */}
                <div className="bg-slate-900 text-slate-300 p-2 text-xs flex items-center justify-between sticky top-0 z-50 shadow-md">
                    <span>Time: {simulatedHour}:00</span>
                    <input type="range" min="6" max="23" value={simulatedHour} onChange={(e) => setSimulatedHour(parseInt(e.target.value))} className="w-32 h-1 bg-slate-600 rounded-lg appearance-none cursor-pointer" />
                    <span className="font-bold text-white">{context.phase}</span>
                </div>

                {/* HEADER */}
                <header className="px-6 pt-6 pb-2 flex justify-between items-center bg-white sticky top-8 z-40 shadow-sm border-b border-slate-100">
                    <div>
                    <p className="text-slate-500 text-sm">Welcome back,</p>
                    <h1 className="text-xl font-bold text-slate-900">{STUDENT_PROFILE.name}</h1>
                    <p className="text-xs text-slate-400">{STUDENT_PROFILE.branch} • {STUDENT_PROFILE.year} • {STUDENT_PROFILE.section}</p>
                    </div>
                    <div className="relative cursor-pointer" onClick={() => setIsLoggedIn(false)}>
                    {STUDENT_PROFILE.profile_pic ? (
                        <img src={STUDENT_PROFILE.profile_pic} alt="Profile" className="w-10 h-10 rounded-full border-2 border-[#800000]" />
                    ) : (
                        <div className="w-10 h-10 rounded-full border-2 border-[#800000] bg-slate-100 flex items-center justify-center text-slate-400">
                        <User size={20} />
                        </div>
                    )}
                    <div className="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full"></div>
                    </div>
                </header>

                <main className="p-6 space-y-6">

                    {/* 1. HOME TAB */}
                    {activeTab === 'home' && (
                    <React.Fragment>
                        {/* Day Navigation for Home (Affects Meal & Laundry) */}
                        <div className="flex items-center justify-between bg-white px-3 py-2 rounded-lg border border-slate-100 mb-4 shadow-sm">
                            <button onClick={() => handleDateChange(-1)} className="p-1 hover:bg-slate-50 rounded-full text-slate-400">
                            <ChevronLeft size={18} />
                            </button>
                            <div className="text-center">
                            <p className="text-xs font-bold text-slate-800">{formatDateDisplay(selectedDate)}</p>
                            </div>
                            <button onClick={() => handleDateChange(1)} className="p-1 hover:bg-slate-50 rounded-full text-slate-400">
                            <ChevronRight size={18} />
                            </button>
                        </div>

                        {/* Context Cards */}
                        <div className="grid grid-cols-2 gap-4 mb-4">
                        <Card className="bg-orange-50 border-orange-100 relative overflow-hidden">
                            <div className="absolute -right-4 -top-4 bg-orange-100 w-20 h-20 rounded-full opacity-50"></div>
                            <div className="flex items-center gap-2 mb-2 text-orange-700">
                            <Utensils size={18} />
                            <span className="font-bold text-sm">{context.mealKey}</span>
                            </div>
                            <p className="text-xs text-slate-600 line-clamp-2 font-medium">{context.meal.slice(0, 3).join(", ")}...</p>
                            <div className="mt-2 text-[10px] text-orange-500 font-bold uppercase tracking-wider">Open until {context.time.split('-')[1]}</div>
                        </Card>

                        {context.phase === 'Night' || context.phase === 'Evening' ? (
                            <Card onClick={() => setActiveTab('laundry')} className="bg-indigo-50 border-indigo-100 relative overflow-hidden cursor-pointer active:scale-95 transition-transform">
                            <div className="flex items-center gap-2 mb-2 text-indigo-700">
                                <Shirt size={18} />
                                <span className="font-bold text-sm">Laundry</span>
                            </div>
                            <p className="text-sm font-semibold text-slate-800">{laundryInfo.status}</p>
                            <p className="text-xs text-indigo-500 mt-1">{laundryInfo.sub}</p>
                            </Card>
                        ) : (
                            <Card className="bg-blue-50 border-blue-100 relative overflow-hidden">
                            <div className="flex items-center gap-2 mb-2 text-blue-700">
                                <BookOpen size={18} />
                                <span className="font-bold text-sm">Up Next</span>
                            </div>
                            {/* Logic for Next Class based on Time would go here, static for demo */}
                            <p className="text-sm font-semibold text-slate-800">Business Ethics & Values</p>
                            <p className="text-xs text-blue-500 mt-1">Ramanuja Classroom • 10:00 AM</p>
                            </Card>
                        )}
                        </div>

                        {/* NEW: Smart Laundry Alert (Visible if Today/Tomorrow) */}
                        {(laundryInfo.urgent || laundryInfo.status.includes('Tomorrow')) && (
                        <Card onClick={() => setActiveTab('laundry')} className="mb-6 bg-gradient-to-r from-indigo-50 to-white border-indigo-100 flex items-center justify-between cursor-pointer shadow-sm active:scale-95 transition-transform">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600">
                                    <Shirt size={20} />
                                </div>
                                <div>
                                    <h3 className="font-bold text-sm text-indigo-950">{laundryInfo.status}</h3>
                                    <p className="text-xs text-indigo-600 font-medium">{laundryInfo.sub}</p>
                                </div>
                            </div>
                            <div className="bg-white p-1.5 rounded-full shadow-sm">
                                <ChevronRight size={14} className="text-indigo-400" />
                            </div>
                        </Card>
                        )}

                        {/* Quick Actions */}
                        <div>
                        <h2 className="text-sm font-bold text-slate-800 mb-3 uppercase tracking-wider">Quick Actions</h2>
                        <div className="grid grid-cols-4 gap-4">
                            {[
                            { icon: MapPin, label: "Map", color: "text-purple-600 bg-purple-50", target: 'map' },
                            { icon: Bell, label: "Notices", color: "text-amber-600 bg-amber-50", target: 'notices' },
                            { icon: Calendar, label: "Events", color: "text-pink-600 bg-pink-50", target: 'events' },
                            { icon: Shirt, label: "Laundry", color: "text-indigo-600 bg-indigo-50", target: 'laundry' }, // Added Laundry Here
                            { icon: ShoppingBag, label: "Marketplace", color: "text-teal-600 bg-teal-50", target: 'market' }, // Renamed from Buy/Sell
                            { icon: Search, label: "Lost", color: "text-blue-600 bg-blue-50", target: 'lostfound' },
                            { icon: Phone, label: "SOS", color: "text-red-600 bg-red-50", target: 'complaints' }, 
                            ].slice(0, 4).map((action, i) => (
                            <button key={i} onClick={() => setActiveTab(action.target)} className="flex flex-col items-center gap-2 group">
                                <div className={`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform group-active:scale-95 ${action.color}`}>
                                <action.icon size={24} />
                                </div>
                                <span className="text-xs font-medium text-slate-600">{action.label}</span>
                            </button>
                            ))}
                        </div>
                        {/* Expanded Actions Row */}
                        <div className="grid grid-cols-4 gap-4 mt-4">
                            {[
                            { icon: ShoppingBag, label: "Marketplace", color: "text-teal-600 bg-teal-50", target: 'market' }, // Renamed from Buy/Sell
                            { icon: Search, label: "Lost", color: "text-indigo-600 bg-indigo-50", target: 'lostfound' },
                            { icon: Phone, label: "SOS", color: "text-red-600 bg-red-50", target: 'complaints' },
                            { icon: GraduationCap, label: "Academics", color: "text-emerald-600 bg-emerald-50", target: 'academic' } // Added Academic Action
                            ].map((action, i) => (
                                <button key={i} onClick={() => setActiveTab(action.target)} className="flex flex-col items-center gap-2 group">
                                <div className={`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform group-active:scale-95 ${action.color}`}>
                                    <action.icon size={24} />
                                </div>
                                <span className="text-xs font-medium text-slate-600">{action.label}</span>
                                </button>
                            ))}
                        </div>
                        </div>

                        {/* Today's Schedule */}
                        <div className="pt-2">
                        <div className="flex justify-between items-end mb-3">
                            <h2 className="text-lg font-bold text-slate-900">Today's Classes</h2>
                            <button onClick={() => setActiveTab('schedule')} className="text-xs text-[#800000] font-semibold">See Full</button>
                        </div>
                        <div className="space-y-3">
                            {WEEKLY_SCHEDULE[selectedDate] ? WEEKLY_SCHEDULE[selectedDate].slice(0, 3).map((cls) => (
                            <div key={cls.id} className="flex gap-4 items-center">
                                <div className="flex flex-col items-center min-w-[60px]">
                                <span className="text-xs font-bold text-slate-400">{cls.time.split(' ')[0]}</span>
                                <span className="text-[10px] text-slate-300">{cls.time.split(' ')[1]}</span>
                                <div className="h-full w-0.5 bg-slate-100 mt-1"></div>
                                </div>
                                <div className={`flex-1 p-3 rounded-lg border-l-4 shadow-sm bg-white border-[#800000]`}>
                                <h3 className="font-bold text-sm text-slate-800">{cls.subject}</h3>
                                <p className="text-xs text-slate-500 mt-1 flex items-center gap-2">
                                    <MapPin size={10} /> {cls.room}
                                    <span className="w-1 h-1 rounded-full bg-slate-300"></span>
                                    {cls.type}
                                </p>
                                </div>
                            </div>
                            )) : (
                            <p className="text-xs text-slate-400 italic">No classes scheduled.</p>
                            )}
                        </div>
                        </div>
                    </React.Fragment>
                    )}

                    {/* 2. SCHEDULE TAB */}
                    {activeTab === 'schedule' && (
                    <div className="space-y-4">
                        <div className="flex justify-between items-center mb-2">
                        <h2 className="text-xl font-bold text-slate-900">Schedule</h2>
                        <button className="flex items-center gap-1 text-xs font-bold text-[#800000] bg-red-50 px-3 py-1.5 rounded-lg border border-red-100">
                            <FileText size={14} /> Full PDF
                        </button>
                        </div>
                        
                        {/* Day Navigation */}
                        <div className="flex items-center justify-between bg-white p-3 rounded-xl border border-slate-100 mb-4 shadow-sm">
                            <button onClick={() => handleDateChange(-1)} className="p-2 hover:bg-slate-50 rounded-full text-slate-500">
                            <ChevronLeft size={20} />
                            </button>
                            <div className="text-center">
                            <p className="text-sm font-bold text-slate-800">{formatDateDisplay(selectedDate)}</p>
                            <p className="text-[10px] text-slate-400 font-medium uppercase tracking-wide">
                                {selectedDate === "2026-02-04" ? "Today" : ""}
                            </p>
                            </div>
                            <button onClick={() => handleDateChange(1)} className="p-2 hover:bg-slate-50 rounded-full text-slate-500">
                            <ChevronRight size={20} />
                            </button>
                        </div>
                        
                        {WEEKLY_SCHEDULE[selectedDate] ? (
                        WEEKLY_SCHEDULE[selectedDate].map((cls) => (
                            <Card key={cls.id} className="flex justify-between items-start animate-in fade-in slide-in-from-bottom-2 duration-300">
                            <div>
                                <h3 className="font-bold text-slate-800">{cls.subject}</h3>
                                <p className="text-xs text-[#800000] font-medium mt-1">{cls.code}</p>
                                <div className="flex items-center gap-3 mt-3">
                                    <span className="text-xs bg-slate-100 px-2 py-1 rounded text-slate-600">{cls.room}</span>
                                    <span className="text-xs bg-slate-100 px-2 py-1 rounded text-slate-600">{cls.type}</span>
                                </div>
                            </div>
                            <div className="text-right">
                                <p className="text-sm font-bold text-slate-700">{cls.time}</p>
                                <p className="text-[10px] text-slate-400 mt-1 line-clamp-1">{cls.faculty}</p>
                            </div>
                            </Card>
                        ))
                        ) : (
                            <div className="text-center py-10 text-slate-400">
                            <Calendar size={40} className="mx-auto mb-2 opacity-20" />
                            <p className="text-sm">No classes scheduled for this day.</p>
                            </div>
                        )}
                    </div>
                    )}

                    {/* NEW: ACADEMIC UPDATES TAB */}
                    {activeTab === 'academic' && (
                    <div className="space-y-4">
                        <SectionHeader title="Academic Updates" onBack={() => setActiveTab('home')} />
                        {ACADEMIC_UPDATES.map((update) => (
                        <Card key={update.id} className="flex gap-4">
                            <div className={`w-16 h-16 rounded-lg ${update.color} flex flex-col items-center justify-center shrink-0`}>
                            <span className="text-xs font-bold">{update.date.split(' ')[0]}</span>
                            <span className="text-sm font-black">{update.date.split(' ')[1]}</span>
                            </div>
                            <div className="flex-1">
                            <div className="flex justify-between items-start">
                                <h3 className="font-bold text-slate-900">{update.title}</h3>
                                <span className="text-[10px] font-bold uppercase tracking-wider bg-slate-100 px-2 py-1 rounded text-slate-500">{update.type}</span>
                            </div>
                            <p className="text-xs text-slate-500 font-medium mt-1">{update.desc}</p>
                            <div className="flex items-center gap-2 mt-2 text-xs text-slate-500">
                                <Clock size={12}/> {update.time}
                            </div>
                            </div>
                        </Card>
                        ))}
                    </div>
                    )}

                    {/* 3. MESS TAB */}
                    {activeTab === 'mess' && (
                    <div className="space-y-4">
                        <h2 className="text-xl font-bold text-slate-900 mb-4">Mess Menu</h2>
                        
                        {/* Day Navigation for Mess */}
                        <div className="flex items-center justify-between bg-white p-3 rounded-xl border border-slate-100 mb-4 shadow-sm">
                            <button onClick={() => handleDateChange(-1)} className="p-2 hover:bg-slate-50 rounded-full text-slate-500">
                            <ChevronLeft size={20} />
                            </button>
                            <div className="text-center">
                            <p className="text-sm font-bold text-slate-800">{formatDateDisplay(selectedDate)}</p>
                            <p className="text-[10px] text-slate-400 font-medium uppercase tracking-wide">
                                {getDayName(selectedDate)}
                            </p>
                            </div>
                            <button onClick={() => handleDateChange(1)} className="p-2 hover:bg-slate-50 rounded-full text-slate-500">
                            <ChevronRight size={20} />
                            </button>
                        </div>

                        {Object.entries(WEEKLY_MESS_MENU[getDayName(selectedDate)] || {}).map(([mealType, items]) => (
                        <Card key={mealType} className={mealType === context.mealKey.toLowerCase() && selectedDate === "2026-02-04" ? "ring-2 ring-orange-400 animate-in slide-in-from-bottom-2 duration-300" : "animate-in slide-in-from-bottom-2 duration-300"}>
                            <div className="flex justify-between items-center mb-3">
                            <div className="flex items-center gap-2">
                                <div className={`p-1.5 rounded-lg ${mealType === context.mealKey.toLowerCase() && selectedDate === "2026-02-04" ? 'bg-orange-100 text-orange-600' : 'bg-slate-100 text-slate-500'}`}>
                                <Utensils size={16} />
                                </div>
                                <h3 className="font-bold capitalize text-slate-800">{mealType}</h3>
                            </div>
                            <span className="text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-500">{MESS_TIMINGS[mealType]}</span>
                            </div>
                            <div className="flex flex-wrap gap-2">
                            {items.map((item, i) => (
                                <span key={i} className="text-xs bg-slate-50 border border-slate-100 px-2 py-1 rounded-md text-slate-600">{item}</span>
                            ))}
                            </div>
                        </Card>
                        ))}
                    </div>
                    )}

                    {/* 10. LAUNDRY TAB */}
                    {activeTab === 'laundry' && (
                    <div className="space-y-4">
                        <SectionHeader title="Laundry Schedule" onBack={() => setActiveTab('home')} />
                        
                        <Card className="bg-indigo-50 border-indigo-100">
                        <div className="flex items-center gap-3 mb-2">
                            <div className="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600">
                            <Shirt size={20} />
                            </div>
                            <div>
                            <h3 className="font-bold text-slate-900">{LAUNDRY_DATA.hostel}</h3>
                            <p className="text-xs text-slate-500">Location: {LAUNDRY_DATA.location}</p>
                            </div>
                        </div>
                        </Card>

                        {/* Collection Section */}
                        <h3 className="font-bold text-slate-800 mt-4 flex items-center gap-2"><ArrowUpCircle size={16} className="text-indigo-600"/> Collection (Drop)</h3>
                        <Card>
                        <div className="flex justify-between items-center mb-3 border-b border-slate-50 pb-2">
                            <span className="text-xs font-bold text-slate-500 uppercase tracking-wider">Time</span>
                            <span className="text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-600">{LAUNDRY_DATA.collection.time}</span>
                        </div>
                        <div className="grid grid-cols-3 gap-2">
                            {LAUNDRY_DATA.collection.dates.map((date) => {
                                const d = new Date(date);
                                const isSelected = date === selectedDate;
                                return (
                                <div key={date} className={`p-2 rounded-lg text-center border ${isSelected ? 'bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105' : 'bg-slate-50 border-slate-100'}`}>
                                    <span className="block text-xs font-bold">{d.getDate()}</span>
                                    <span className={`block text-[10px] uppercase ${isSelected ? 'text-indigo-200' : 'text-slate-400'}`}>{d.toLocaleDateString('en-US', {month: 'short'})}</span>
                                </div>
                                )
                            })}
                        </div>
                        </Card>

                        {/* Distribution Section */}
                        <h3 className="font-bold text-slate-800 mt-4 flex items-center gap-2"><ArrowDownCircle size={16} className="text-green-600"/> Distribution (Pickup)</h3>
                        <Card>
                        <div className="flex justify-between items-center mb-3 border-b border-slate-50 pb-2">
                            <span className="text-xs font-bold text-slate-500 uppercase tracking-wider">Time</span>
                            <span className="text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-600">{LAUNDRY_DATA.distribution.time}</span>
                        </div>
                        <div className="grid grid-cols-3 gap-2">
                            {LAUNDRY_DATA.distribution.dates.map((date) => {
                                const d = new Date(date);
                                const isSelected = date === selectedDate;
                                return (
                                <div key={date} className={`p-2 rounded-lg text-center border ${isSelected ? 'bg-green-600 text-white border-green-600 shadow-md transform scale-105' : 'bg-slate-50 border-slate-100'}`}>
                                    <span className="block text-xs font-bold">{d.getDate()}</span>
                                    <span className={`block text-[10px] uppercase ${isSelected ? 'text-green-200' : 'text-slate-400'}`}>{d.toLocaleDateString('en-US', {month: 'short'})}</span>
                                </div>
                                )
                            })}
                        </div>
                        </Card>
                    </div>
                    )}

                    {/* 4. DIRECTORY TAB (Replaces Complaints) */}
                    {activeTab === 'directory' && (
                    <div className="space-y-4 pb-20">
                        <h2 className="text-xl font-bold text-slate-900">Campus Directory</h2>
                        
                        {/* Toggle */}
                        <div className="flex p-1 bg-slate-100 rounded-xl mb-4">
                        <button 
                            onClick={() => setDirCategory('emergency')}
                            className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${dirCategory === 'emergency' ? 'bg-white text-red-600 shadow-sm' : 'text-slate-500'}`}
                        >
                            Emergency
                        </button>
                        <button 
                            onClick={() => setDirCategory('local')}
                            className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${dirCategory === 'local' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500'}`}
                        >
                            Local
                        </button>
                        <button 
                            onClick={() => setDirCategory('pocs')}
                            className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${dirCategory === 'pocs' ? 'bg-white text-teal-600 shadow-sm' : 'text-slate-500'}`}
                        >
                            POCs
                        </button>
                        </div>

                        <div className="space-y-3">
                        {/* Emergency & Local Render Logic */}
                        {(dirCategory === 'emergency' || dirCategory === 'local') && DIRECTORY_DATA[dirCategory].map((contact, i) => (
                            <Card key={i} className="flex flex-col gap-3">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-3">
                                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${dirCategory === 'emergency' ? contact.color : 'bg-indigo-50 text-indigo-600'}`}>
                                            <contact.icon size={20} />
                                        </div>
                                        <div>
                                            <h3 className="font-bold text-slate-900 text-sm">{contact.name}</h3>
                                            <p className="text-xs text-slate-500">{dirCategory === 'local' ? contact.desc : contact.number}</p>
                                        </div>
                                    </div>
                                    <button className="p-2 bg-slate-50 rounded-full text-slate-600 hover:bg-slate-100 active:scale-95 transition-transform">
                                        <Phone size={18} />
                                    </button>
                                </div>
                                
                                {contact.canOrder && (
                                    <button 
                                        onClick={() => { setSelectedOutlet(contact.name); setActiveModal('order'); }}
                                        className="w-full py-2 bg-slate-900 text-white text-xs font-bold rounded-lg shadow-sm active:scale-95 transition-transform flex items-center justify-center gap-2"
                                    >
                                        <Utensils size={14} /> Order Now
                                    </button>
                                )}
                            </Card>
                        ))}

                        {/* POCs Render Logic */}
                        {dirCategory === 'pocs' && (
                            <div className="space-y-4">
                            {['Committee', 'Club'].map((type) => (
                                <div key={type} className="border border-slate-200 rounded-xl bg-white overflow-hidden">
                                <button 
                                    onClick={() => setActivePocSection(activePocSection === type ? null : type)}
                                    className="w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors"
                                >
                                    <div className="flex items-center gap-3">
                                    <div className={`w-10 h-10 rounded-full flex items-center justify-center ${type === 'Committee' ? 'bg-purple-100 text-purple-600' : 'bg-teal-100 text-teal-600'}`}>
                                        <Users size={20} />
                                    </div>
                                    <span className="font-bold text-slate-800">{type === 'Committee' ? 'Committees' : 'Clubs'}</span>
                                    </div>
                                    {activePocSection === type ? <ChevronUp size={20} className="text-slate-400"/> : <ChevronDown size={20} className="text-slate-400"/>}
                                </button>
                                
                                {activePocSection === type && (
                                    <div className="bg-slate-50 p-3 space-y-3 border-t border-slate-100">
                                    {DIRECTORY_DATA.pocs.filter(item => item.type === type).map((item, i) => (
                                        <div key={i} className="bg-white border border-slate-200 rounded-lg p-3 shadow-sm">
                                            <h4 className="font-bold text-slate-800 text-sm mb-2">{item.name}</h4>
                                            <div className="space-y-2">
                                                {item.contacts.map((contact, j) => (
                                                <div key={j} className="flex items-center justify-between text-xs">
                                                    <span className="text-slate-600">{contact.name}</span>
                                                    <a href={`tel:${contact.number}`} className="text-blue-600 font-medium flex items-center gap-1 bg-blue-50 px-2 py-1 rounded">
                                                        <Phone size={10} /> Call
                                                    </a>
                                                </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                    </div>
                                )}
                                </div>
                            ))}
                            </div>
                        )}
                        </div>

                        {/* My Support Tickets (Tucked at bottom) */}
                        <div className="mt-8 pt-6 border-t border-slate-100">
                        <div className="flex justify-between items-center mb-3">
                            <h3 className="font-bold text-slate-800 text-sm">My Support Tickets</h3>
                            <span className="text-xs bg-slate-100 px-2 py-1 rounded text-slate-500">{complaints.length} Active</span>
                        </div>
                        <div className="space-y-2">
                            {complaints.map((ticket) => (
                                <div key={ticket.id} className="bg-white border border-slate-100 p-3 rounded-lg flex justify-between items-center">
                                <div>
                                    <div className="flex items-center gap-2">
                                        <span className="text-xs font-bold text-slate-700">{ticket.category}</span>
                                        <Badge color={ticket.color}>{ticket.status}</Badge>
                                    </div>
                                    <p className="text-[10px] text-slate-400 mt-1">{ticket.date}</p>
                                </div>
                                <ChevronRight size={14} className="text-slate-300" />
                                </div>
                            ))}
                        </div>
                        </div>
                    </div>
                    )}

                    {/* 5. EVENTS TAB */}
                    {activeTab === 'events' && (
                    <div className="space-y-4">
                        <SectionHeader title="Events" onBack={() => setActiveTab('home')} />
                        {EVENTS.map((evt) => (
                        <Card key={evt.id} className="flex gap-4">
                            <div className={`w-16 h-16 rounded-lg ${evt.color} flex flex-col items-center justify-center shrink-0`}>
                            <span className="text-xs font-bold">{evt.date.split(' ')[0]}</span>
                            <span className="text-sm font-black">{evt.date.split(' ')[1]}</span>
                            </div>
                            <div className="flex-1">
                            <h3 className="font-bold text-slate-900">{evt.title}</h3>
                            <p className="text-xs text-slate-500 font-medium">{evt.club}</p>
                            <div className="flex items-center gap-3 mt-2 text-xs text-slate-500">
                                <span className="flex items-center gap-1"><Clock size={12}/> {evt.time}</span>
                                <span className="flex items-center gap-1"><MapPin size={12}/> {evt.loc}</span>
                            </div>
                            <button className="mt-3 w-full py-1.5 bg-slate-900 text-white text-xs font-bold rounded-lg">RSVP Now</button>
                            </div>
                        </Card>
                        ))}
                    </div>
                    )}

                    {/* 6. MARKETPLACE TAB */}
                    {activeTab === 'market' && (
                    <div className="space-y-4">
                        <SectionHeader title="Campus Marketplace" onBack={() => setActiveTab('home')} />
                        <div className="bg-white p-2 rounded-xl flex items-center justify-between mb-4 border border-slate-100">
                            {['all', 'sell', 'donate'].map(filter => (
                                <button 
                                    key={filter}
                                    onClick={() => setMarketFilter(filter)}
                                    className={`flex-1 py-2 text-xs font-bold capitalize rounded-lg transition-colors ${marketFilter === filter ? 'bg-slate-900 text-white' : 'text-slate-500 hover:bg-slate-50'}`}
                                >
                                    {filter === 'all' ? 'All Items' : filter}
                                </button>
                            ))}
                        </div>
                        
                        <div className="bg-blue-50 p-3 rounded-lg flex items-start gap-3 mb-2">
                        <ShoppingBag size={20} className="text-blue-600 mt-0.5" />
                        <p className="text-xs text-blue-700 leading-relaxed">Buy, sell, or donate items within campus. All interactions are verified.</p>
                        </div>
                        <div className="grid grid-cols-2 gap-3">
                        {marketplaceItems
                            .filter(item => marketFilter === 'all' || item.type === marketFilter)
                            .map((item) => (
                            <Card key={item.id} className="p-3">
                            <div className="aspect-square bg-slate-100 rounded-lg mb-3 flex items-center justify-center text-slate-300 relative overflow-hidden group">
                                <img src={item.imageUrl} alt={item.title} className="w-full h-full object-cover transition-transform group-hover:scale-110" />
                                {item.type === 'donate' && (
                                    <div className="absolute top-2 right-2 bg-pink-500 text-white p-1 rounded-full shadow-sm">
                                        <Gift size={12} />
                                    </div>
                                )}
                            </div>
                            <h3 className="font-bold text-sm text-slate-900 line-clamp-1">{item.title}</h3>
                            <div className="flex justify-between items-end mt-1">
                                <div>
                                    <p className={`font-bold text-sm ${item.type === 'donate' ? 'text-pink-600' : 'text-[#800000]'}`}>{item.price}</p>
                                    <p className="text-[10px] text-slate-500 mt-0.5">by {item.seller.split(' ')[0]}</p>
                                </div>
                            </div>
                            <button className="mt-2 w-full py-1 bg-white border border-slate-200 text-slate-700 text-xs font-bold rounded shadow-sm">Contact</button>
                            </Card>
                        ))}
                        </div>
                        {marketplaceItems.filter(item => marketFilter === 'all' || item.type === marketFilter).length === 0 && (
                            <div className="text-center py-10 text-slate-400">
                                <p className="text-sm">No items found.</p>
                            </div>
                        )}
                        <button onClick={() => { setActiveModal('sell'); setListingType('sell'); }} className="fixed bottom-24 right-6 w-12 h-12 bg-slate-900 rounded-full text-white flex items-center justify-center shadow-lg"><Plus size={24}/></button>
                    </div>
                    )}

                    {/* 7. LOST & FOUND TAB */}
                    {activeTab === 'lostfound' && (
                    <div className="space-y-4">
                        <SectionHeader title="Lost & Found" onBack={() => setActiveTab('home')} />
                        <div className="flex gap-2 mb-2">
                        <button className="flex-1 py-2 bg-slate-900 text-white text-xs font-bold rounded-lg">All Items</button>
                        <button className="flex-1 py-2 bg-white border border-slate-200 text-slate-600 text-xs font-bold rounded-lg">My Posts</button>
                        </div>
                        {lostFoundItems.map((item) => (
                        <Card key={item.id} className="flex gap-4 items-center">
                            <div className="w-16 h-16 rounded-lg overflow-hidden shrink-0 border border-slate-100">
                            <img src={item.imageUrl} alt={item.item} className="w-full h-full object-cover" />
                            </div>
                            <div className="flex-1">
                            <div className="flex justify-between items-start">
                                <h3 className="font-bold text-slate-900">{item.item}</h3>
                                <Badge color={item.type === 'Lost' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}>{item.type}</Badge>
                            </div>
                            <p className="text-xs text-slate-500 mt-1">Loc: {item.location} • {item.date}</p>
                            <p className="text-xs text-slate-700 font-medium mt-1">Contact: {item.contact}</p>
                            </div>
                        </Card>
                        ))}
                        <button onClick={() => setActiveModal('lostfound')} className="fixed bottom-24 right-6 w-12 h-12 bg-indigo-600 rounded-full text-white flex items-center justify-center shadow-lg"><Plus size={24}/></button>
                    </div>
                    )}

                    {/* 8. MAPS TAB */}
                    {activeTab === 'map' && (
                    <div className="space-y-4 h-full">
                        <SectionHeader title="Campus Map" onBack={() => setActiveTab('home')} />
                        
                        {/* Map Switcher Toggle */}
                        <div className="flex p-1 bg-slate-100 rounded-xl mb-4">
                        <button 
                            onClick={() => setMapView('campus')}
                            className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${mapView === 'campus' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500'}`}
                        >
                            Campus Map
                        </button>
                        <button 
                            onClick={() => setMapView('uruvela')}
                            className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${mapView === 'uruvela' ? 'bg-white text-purple-600 shadow-sm' : 'text-slate-500'}`}
                        >
                            Uruvela (Acad)
                        </button>
                        </div>

                        {mapView === 'campus' ? (
                        <div className="rounded-xl overflow-hidden mb-4 border border-slate-200 shadow-sm relative group">
                            <img 
                            src="https://images.unsplash.com/photo-1569336415962-a4bd9f69cd83?auto=format&fit=crop&q=80&w=1000" 
                            alt="IIM Bodh Gaya Campus Map" 
                            className="w-full h-auto object-cover"
                            />
                            <div className="absolute bottom-2 right-2 bg-black/60 text-white text-[10px] px-2 py-1 rounded backdrop-blur-sm">
                            Pinch to Zoom
                            </div>
                        </div>
                        ) : (
                        <div className="aspect-[4/3] bg-slate-200 rounded-xl flex items-center justify-center text-slate-400 mb-4 border-2 border-dashed border-slate-300 relative overflow-hidden">
                            <div className="absolute inset-0 flex flex-col items-center justify-center bg-slate-50">
                                <Compass size={48} className="mb-2 text-purple-300" />
                                <span className="font-bold text-slate-400 text-sm">Academic Block Floor Plan</span>
                            </div>
                        </div>
                        )}

                        <h3 className="font-bold text-slate-800">Key Locations</h3>
                        <div className="space-y-2">
                        {MAP_DATA[mapView].map((loc, i) => (
                            <div key={i} className="flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg animate-in fade-in slide-in-from-bottom-2">
                            <div className="flex items-center gap-3">
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${mapView === 'campus' ? 'bg-indigo-100 text-indigo-700' : 'bg-purple-100 text-purple-700'}`}>
                                {loc.id}
                                </div>
                                <span className="text-sm font-medium text-slate-700">{loc.name}</span>
                            </div>
                            <span className="text-[10px] text-slate-400 uppercase font-bold tracking-wider">{loc.type}</span>
                            </div>
                        ))}
                        </div>
                    </div>
                    )}

                    {/* 9. NOTICES TAB */}
                    {activeTab === 'notices' && (
                    <div className="space-y-4">
                        <SectionHeader title="Notices" onBack={() => setActiveTab('home')} />
                        {NOTICES.map((notice) => (
                        <Card key={notice.id} className="border-l-4 border-l-slate-400">
                            <div className="flex justify-between items-start mb-1">
                                <span className="text-[10px] font-bold uppercase tracking-wider text-slate-500">{notice.type}</span>
                                <span className="text-[10px] text-slate-400">{notice.date}</span>
                            </div>
                            <h3 className="font-bold text-slate-800 mb-2">{notice.title}</h3>
                            <div className="flex gap-2">
                                <button className="text-xs bg-slate-100 px-3 py-1.5 rounded font-medium text-slate-700">View PDF</button>
                                {notice.urgent && <span className="text-xs bg-red-100 px-2 py-1.5 rounded font-bold text-red-700 flex items-center gap-1"><AlertCircle size={12}/> Urgent</span>}
                            </div>
                        </Card>
                        ))}
                    </div>
                    )}

                </main>

                {/* --- QUICK ACTION MENU --- */}
                {activeModal === 'actionMenu' && (
                    <div className="fixed inset-0 bg-black/60 z-50 flex items-end sm:items-center justify-center p-4">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 animate-in slide-in-from-bottom-10 max-h-[85vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-6">
                        <h3 className="font-bold text-lg text-slate-900">Create New</h3>
                        <button onClick={() => setActiveModal(null)} className="p-1 hover:bg-slate-100 rounded-full text-slate-500">
                            <X size={20} />
                        </button>
                        </div>
                        <div className="grid grid-cols-3 gap-4">
                        <button onClick={() => setActiveModal('complaint')} className="flex flex-col items-center gap-3 group">
                            <div className="w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-600 group-active:scale-95 transition-transform border border-red-100">
                            <AlertCircle size={28} />
                            </div>
                            <span className="text-xs font-bold text-slate-700">Complaint</span>
                        </button>
                        <button onClick={() => setActiveModal('lostfound')} className="flex flex-col items-center gap-3 group">
                            <div className="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 group-active:scale-95 transition-transform border border-blue-100">
                            <Search size={28} />
                            </div>
                            <span className="text-xs font-bold text-slate-700">Lost Item</span>
                        </button>
                        <button onClick={() => setActiveModal('sell')} className="flex flex-col items-center gap-3 group">
                            <div className="w-16 h-16 bg-teal-50 rounded-2xl flex items-center justify-center text-teal-600 group-active:scale-95 transition-transform border border-teal-100">
                            <ShoppingBag size={28} />
                            </div>
                            <span className="text-xs font-bold text-slate-700">Sell Item</span>
                        </button>
                        </div>
                    </div>
                    </div>
                )}

                {/* --- COMPLAINT MODAL --- */}
                {activeModal === 'complaint' && (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center p-4">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 animate-in slide-in-from-bottom-10 max-h-[85vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-4">
                        <h3 className="font-bold text-lg">Lodge Complaint</h3>
                        <button onClick={() => setActiveModal(null)} className="text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors">
                            <X size={24} />
                        </button>
                        </div>
                        <form onSubmit={handleLodgeComplaint} className="space-y-4">
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Category</label>
                            <div className="grid grid-cols-3 gap-2 mt-2">
                            {['Electrician', 'Plumber', 'Carpenter', 'Cleaning', 'Wi-Fi'].map(cat => (
                                <label key={cat} className="flex flex-col items-center justify-center p-3 border rounded-lg cursor-pointer hover:bg-indigo-50 hover:border-indigo-200 has-[:checked]:bg-indigo-50 has-[:checked]:border-[#800000] has-[:checked]:text-[#800000] transition-all">
                                <input type="radio" name="category" value={cat} className="hidden" required />
                                <span className="text-[10px] font-medium mt-1">{cat}</span>
                                </label>
                            ))}
                            </div>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase mb-2 block">Photo Proof (Mandatory)</label>
                            <button type="button" className="w-full h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-slate-400 hover:border-[#800000] hover:text-[#800000] transition-colors">
                            <Camera size={20} />
                            <span className="text-xs mt-1">Tap to capture image</span>
                            </button>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Preferred Time</label>
                            <select className="w-full mt-1 p-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-[#800000]">
                            <option>Morning (9 AM - 12 PM)</option>
                            <option>Afternoon (12 PM - 4 PM)</option>
                            <option>Evening (4 PM - 8 PM)</option>
                            </select>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Description</label>
                            <textarea name="description" required rows="2" className="w-full mt-1 p-3 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#800000]" placeholder="Describe the issue..."></textarea>
                        </div>
                        <label className="flex items-start gap-2 p-3 bg-slate-50 rounded-lg">
                            <input type="checkbox" className="mt-1 rounded text-[#800000]" />
                            <span className="text-xs text-slate-600">I allow the worker to enter my room if I am not present.</span>
                        </label>
                        <button type="submit" className="w-full bg-[#800000] text-white font-bold py-3 rounded-xl shadow-lg shadow-red-200 active:scale-95 transition-transform">
                            Submit Ticket
                        </button>
                        </form>
                    </div>
                    </div>
                )}

                {/* --- ORDER FOOD MODAL --- */}
                {activeModal === 'order' && selectedOutlet && (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center p-4">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 animate-in slide-in-from-bottom-10 max-h-[85vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-4">
                        <div>
                            <h3 className="font-bold text-lg">Order from {selectedOutlet}</h3>
                            <p className="text-xs text-slate-500">Fast & Contactless Payment</p>
                        </div>
                        <button onClick={() => { setActiveModal(null); setSelectedOutlet(null); }} className="text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors">
                            <X size={24} />
                        </button>
                        </div>
                        
                        <form onSubmit={handleOrderSubmit} className="space-y-4">
                            {/* Menu Dropdown */}
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase">Select Item</label>
                                <div className="relative mt-1">
                                    <select required className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-800 appearance-none outline-none focus:ring-2 focus:ring-slate-900">
                                        <option value="">-- Choose Item --</option>
                                        {OUTLET_MENUS[selectedOutlet]?.map((item, index) => (
                                            <option key={index} value={item}>{item}</option>
                                        ))}
                                    </select>
                                    <ChevronDown size={16} className="absolute right-3 top-3.5 text-slate-400 pointer-events-none" />
                                </div>
                            </div>

                            {/* Order Type */}
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase">Order Type</label>
                                <div className="grid grid-cols-3 gap-2 mt-1">
                                    {['Dine-in', 'Takeaway', 'Delivery'].map((type) => (
                                        <label key={type} className="flex flex-col items-center justify-center p-2 border rounded-lg cursor-pointer hover:bg-slate-50 has-[:checked]:bg-slate-900 has-[:checked]:text-white has-[:checked]:border-slate-900 transition-all">
                                            <input type="radio" name="orderType" value={type} className="hidden" required defaultChecked={type === 'Takeaway'} />
                                            <span className="text-xs font-bold">{type}</span>
                                        </label>
                                    ))}
                                </div>
                            </div>

                            {/* Instructions */}
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase">Instructions (Optional)</label>
                                <textarea name="instructions" rows="2" className="w-full mt-1 p-3 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate-900" placeholder="e.g. Less sugar, extra spicy..."></textarea>
                            </div>

                            {/* Payment Info Box */}
                            <div className="bg-emerald-50 p-3 rounded-lg border border-emerald-100 flex items-start gap-3">
                                <Shield size={16} className="text-emerald-600 mt-0.5 shrink-0" />
                                <div>
                                    <p className="text-xs font-bold text-emerald-800">Secure Payment</p>
                                    <p className="text-[10px] text-emerald-600">Your UPI payment will be processed securely.</p>
                                </div>
                            </div>

                            <button type="submit" className="w-full bg-slate-900 text-white font-bold py-3.5 rounded-xl shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2">
                                <span>Pay Now</span>
                                <ArrowRight className="w-4 h-4" /> 
                            </button>
                        </form>
                    </div>
                    </div>
                )}

                {/* --- SELL ITEM MODAL --- */}
                {activeModal === 'sell' && (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center p-4">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 animate-in slide-in-from-bottom-10 max-h-[85vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-4">
                        <h3 className="font-bold text-lg">Sell Item</h3>
                        <button onClick={() => setActiveModal(null)} className="text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors">
                            <X size={24} />
                        </button>
                        </div>
                        <form onSubmit={handleSellItem} className="space-y-4">
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Item Name</label>
                            <input name="title" required className="w-full mt-1 p-3 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="e.g. Scientific Calculator" />
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Price (₹)</label>
                            <input name="price" type="number" required className="w-full mt-1 p-3 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="e.g. 500" />
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase mb-2 block">Item Photo</label>
                            <button type="button" className="w-full h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-slate-400 hover:border-teal-500 hover:text-teal-500 transition-colors">
                            <Camera size={20} />
                            <span className="text-xs mt-1">Tap to capture image</span>
                            </button>
                        </div>
                        <button type="submit" className="w-full bg-teal-600 text-white font-bold py-3 rounded-xl shadow-lg shadow-teal-200 active:scale-95 transition-transform">
                            List Item
                        </button>
                        </form>
                    </div>
                    </div>
                )}

                {/* --- LOST & FOUND MODAL --- */}
                {activeModal === 'lostfound' && (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center p-4">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 animate-in slide-in-from-bottom-10 max-h-[85vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-4">
                        <h3 className="font-bold text-lg">Post Lost/Found</h3>
                        <button onClick={() => setActiveModal(null)} className="text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors">
                            <X size={24} />
                        </button>
                        </div>
                        <form onSubmit={handlePostLostFound} className="space-y-4">
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Type</label>
                            <div className="flex gap-4 mt-2">
                            <label className="flex-1 flex flex-col items-center justify-center p-3 border rounded-lg cursor-pointer hover:bg-red-50 hover:border-red-200 has-[:checked]:bg-red-50 has-[:checked]:border-red-500 has-[:checked]:text-red-700">
                                <input type="radio" name="type" value="Lost" className="hidden" required defaultChecked />
                                <span className="font-bold text-sm">Lost Item</span>
                            </label>
                            <label className="flex-1 flex flex-col items-center justify-center p-3 border rounded-lg cursor-pointer hover:bg-green-50 hover:border-green-200 has-[:checked]:bg-green-50 has-[:checked]:border-green-500 has-[:checked]:text-green-700">
                                <input type="radio" name="type" value="Found" className="hidden" required />
                                <span className="font-bold text-sm">Found Item</span>
                            </label>
                            </div>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Item Description</label>
                            <input name="item" required className="w-full mt-1 p-3 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. Blue Umbrella" />
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Last Seen Location</label>
                            <input name="location" required className="w-full mt-1 p-3 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. Library" />
                        </div>
                        <button type="submit" className="w-full bg-slate-900 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition-transform">
                            Post Alert
                        </button>
                        </form>
                    </div>
                    </div>
                )}

                {/* --- BOTTOM NAVIGATION --- */}
                <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 px-6 py-3 flex justify-between items-center z-40 text-xs font-medium pb-safe">
                    <button onClick={() => setActiveTab('home')} className={`flex flex-col items-center gap-1 ${activeTab === 'home' ? 'text-[#800000]' : 'text-slate-400'}`}>
                    <Home size={22} strokeWidth={activeTab === 'home' ? 2.5 : 2} /> Home
                    </button>
                    <button onClick={() => setActiveTab('schedule')} className={`flex flex-col items-center gap-1 ${activeTab === 'schedule' ? 'text-[#800000]' : 'text-slate-400'}`}>
                    <BookOpen size={22} strokeWidth={activeTab === 'schedule' ? 2.5 : 2} /> Classes
                    </button>
                    <div className="relative -top-6">
                    <button onClick={() => setActiveModal('actionMenu')} className="w-14 h-14 bg-[#800000] rounded-full flex items-center justify-center text-white shadow-xl shadow-red-200 active:scale-90 transition-transform">
                        <Plus size={28} />
                    </button>
                    </div>
                    <button onClick={() => setActiveTab('mess')} className={`flex flex-col items-center gap-1 ${activeTab === 'mess' ? 'text-[#800000]' : 'text-slate-400'}`}>
                    <Utensils size={22} strokeWidth={activeTab === 'mess' ? 2.5 : 2} /> Mess
                    </button>
                    <button onClick={() => { setActiveTab('directory'); setDirCategory('emergency'); }} className={`flex flex-col items-center gap-1 ${activeTab === 'directory' ? 'text-[#800000]' : 'text-slate-400'}`}>
                    <Contact size={22} strokeWidth={activeTab === 'directory' ? 2.5 : 2} /> Directory
                    </button>
                </nav>

                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>